<!DOCTYPE html>
<html>
  <head>
    <title>Morse to Letters</title>
    <meta name="viewport" content="width-device-width, initial-scale=1">
    <link rel="stylesheet" href="base.css" media="screen" title="no title">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script type="text/javascript">
    function sendSMS () {
      var to = $('#to').val()
        var body = $('#body').val()
    $.ajax({
      type: "GET",
      url: 'http://970687a2.ngrok.io/sms?to='+to+'&body='+body,
      headers: {
        'Access-Control-Allow-Origin': '*'
      },
      success: function() {
  // Esta funcion se va a llamar si todo salio chillin
  alert('worked')
  },
});
}
    </script>
  </head>
  <body>
    <form class="" action="index.html" method="post">
      <label for="">To</label><br>
      <input id="to" type="text"  name="name" value=""><br>
      <label for="">Message</label><br>
      <input id="body" type="text"  name="name" value="">

    <button type="button" onClick="sendSMS()" name="button">Send</button>
  </form><br><br>
    <div id="two">

</div>
<div id="box">
    <textarea id="type"></textarea>
</div>

    <script type="text/javascript">
    var morse = {
  '.-': 'a',
   '-...': 'b',
    '-.-.': 'c',
     '-..': 'd',
      '.': 'e',
  '..-.': 'f',
   '--.': 'g',
    '....': 'h',
     '..': 'i',
      '.---': 'j',
  '-.-': 'k',
   '.-..': 'l',
    '--': 'm',
     '-.': 'n',
      '---': 'o',
  '.--.': 'p',
   '--.-': 'q',
    '.-.': 'r',
     '...': 's',
      '-': 't',
  '..-': 'u',
   '...-': 'v',
    '.--': 'w',
     '-..-': 'x',
      '-.--': 'y',
  '--..': 'z',
   '.----': '1',
    '..---': '2',
     '...--': '3',
  '....-': '4',
   '.....': '5',
    '-....': '6',
     '--...': '7',
  '---..': '8',
   '----.': '9',
    '-----': '0',
     '.-.-.-': '.',
  '--..--': ',',
   '..--..': '?',
    '-..-.': '/',
     '.--.-.': '@',
};

function translate_morse(code) {
  return (typeof morse[code] === "undefined") ? "" : morse[code];
}

$('#type').keydown(function(e) {
  console.log(e.keyCode)
  switch(e.keyCode) {

      case 81: this.value += "."; break;
      case 87: this.value += "."; break;
      case 69: this.value += "."; break;
      case 82: this.value += "."; break;
      case 65: this.value += "."; break;
      case 83: this.value += "."; break;
      case 68: this.value += "."; break;
      case 70: this.value += "."; break;
      case 90: this.value += "."; break;
      case 88: this.value += "."; break;
      case 67: this.value += "."; break;
      case 86: this.value += "."; break;

      case 39: this.value += "-"; break;
      case 84: this.value += "-"; break;
      case 89: this.value += "-"; break;
      case 85: this.value += "-"; break;
      case 73: this.value += "-"; break;
      case 79: this.value += "-"; break;
      case 80: this.value += "-"; break;
      case 71: this.value += "-"; break;
      case 72: this.value += "-"; break;
      case 74: this.value += "-"; break;
      case 75: this.value += "-"; break;
      case 76: this.value += "-"; break;
      case 66: this.value += "-"; break;
      case 77: this.value += "-"; break;
      case 78: this.value += "-"; break;

      case 40: this.value += " "; break;
      case 32: this.value += " "; break;

      case 8: return; // allow backspace
  }
  e.preventDefault();
}).keyup(function() {
  $('#two').text(
      this.value.split(" ").map(translate_morse).join("")
  );
});

    </script>
  </body>
</html>
